# Проектная работа 4 спринта

## Корневая директория сервиса - services

### Директории проекта:

1. /es — содержит конфигурационный файл Elasticsearch.
2. /etl_loader — опциональный сервис для заполнения Elasticsearch, обеспечивающий корректную работу API.
3. /fastapi — API сервиса.
4. /kibana — содержит конфигурационный файл интерфейса к Elasticsearch.

### Структура FastAPI

1. **api/v1** — это папка, которая содержит все необходимые файлы для работы API и отдачи данных. Кроме перечисленных файлов маршрутов, здесь также находится файл **schema.py**, где описаны основные схемы отдачи данных.
2. **core** — это папка, в которой находится файл конфигурации и настройки логирования.
3. **db** — это папка, где определены подключения к базам данных Elastic и Redis.
4. **docker** — это папка, в которой хранится скрипт для запуска API в контейнере.
5. **models** — это папка с основными бизнес-сущностями.
6. **services** — это папка с основными сервисами.
7. **utils** — это папка с дополнительными инструментами для работы с API. Здесь находятся enums, builder для формирования тела запроса и другие полезные инструменты.
8. **main.py** — это стартовая точка приложения, где происходит запуск всего приложения.

### Переменные окружения

Для успешного запуска необходимо удостовериться в определении корректных переменных окружения.

**
Для запуска сервисов в режиме production их IP-адреса должны соответствовать названиям контейнеров.
Пример: ELASTIC_HOST=elasticsearch

Для запуска development используются IP-адреса, на которых работают сервисы.
Пример: ELASTIC_HOST=localhost
**


### Развертывание

Для запуска сборки необходимо перейти в директорию /services и прописать следующую команду:

```bash
  docker compose up --build -d
```

После успешного запуска elasticsearch запустится es_loader. Загрузка данных может занимать от 1 до 3 минут.



